## Generate Jupyter container image using existing ilab applications suite
Bootstrap: localimage
FROM: ./ilab-apps-1.0.0.simg

%labels
    Author gtamkin
    Version v1.0.0

%help
===========================================================================
	jupyter-lab (extends any of the above) â€“ contains notebook conveniences:
		a.	Jupyter lab
		b.	Firefox
===========================================================================

%environment
    JUP_PORT=8888
    JUP_IPNAME=localhost
    export JUP_PORT JUP_IPNAME

%startscript
    PORT=""
    if [ -n "$JUP_PORT" ]; then PORT="--port=${JUP_PORT}" fi
    IPNAME=""
    if [ -n "$JUP_IPNAME" ]; then
    IPNAME="--ip=${JUP_IPNAME}" fi
    exec jupyter lab --allow-root ${PORT} ${IPNAME}
    #exec jupyter notebook --allow-root ${PORT} ${IPNAME}

%post
    # install Firefox
    apt-get install -y firefox-esr

    # install JupyterLab
    python3.7 -m pip install --upgrade jupyterlab==1.2.6


